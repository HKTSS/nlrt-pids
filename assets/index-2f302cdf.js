var nt=Object.defineProperty;var lt=(e,t,n)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var G=(e,t,n)=>(lt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function F(){}const st=e=>e;function Ue(e){return e()}function Le(){return Object.create(null)}function Q(e){e.forEach(Ue)}function $e(e){return typeof e=="function"}function ue(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let he;function it(e,t){return he||(he=document.createElement("a")),he.href=t,e===he.href}function ot(e){return Object.keys(e).length===0}const xe=typeof window<"u";let rt=xe?()=>window.performance.now():()=>Date.now(),Ce=xe?e=>requestAnimationFrame(e):F;const ee=new Set;function Ve(e){ee.forEach(t=>{t.c(e)||(ee.delete(t),t.f())}),ee.size!==0&&Ce(Ve)}function at(e){let t;return ee.size===0&&Ce(Ve),{promise:new Promise(n=>{ee.add(t={c:e,f:n})}),abort(){ee.delete(t)}}}function a(e,t){e.appendChild(t)}function Qe(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function ct(e){const t=m("style");return ut(Qe(e),t),t.sheet}function ut(e,t){return a(e.head||e,t),t.sheet}function O(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function we(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function R(e){return document.createTextNode(e)}function $(){return R(" ")}function ft(){return R("")}function ie(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function _(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function dt(e){return Array.from(e.childNodes)}function K(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function _e(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t){l.selected=!0;return}}e.selectedIndex=-1}function De(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function Je(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,l,t),s}const ve=new Map;let be=0;function ht(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function _t(e,t){const n={stylesheet:ct(t),rules:{}};return ve.set(e,n),n}function Me(e,t,n,l,s,i,o,r=0){const u=16.666/l;let c=`{
`;for(let T=0;T<=1;T+=u){const C=t+(n-t)*i(T);c+=T*100+`%{${o(C,1-C)}}
`}const h=c+`100% {${o(n,1-n)}}
}`,p=`__svelte_${ht(h)}_${r}`,g=Qe(e),{stylesheet:d,rules:b}=ve.get(g)||_t(g,e);b[p]||(b[p]=!0,d.insertRule(`@keyframes ${p} ${h}`,d.cssRules.length));const y=e.style.animation||"";return e.style.animation=`${y?`${y}, `:""}${p} ${l}ms linear ${s}ms 1 both`,be+=1,p}function mt(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?i=>i.indexOf(t)<0:i=>i.indexOf("__svelte")===-1),s=n.length-l.length;s&&(e.style.animation=l.join(", "),be-=s,be||pt())}function pt(){Ce(()=>{be||(ve.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&A(t)}),ve.clear())})}let re;function oe(e){re=e}function Xe(){if(!re)throw new Error("Function called outside component initialization");return re}function He(e){Xe().$$.on_mount.push(e)}function gt(){const e=Xe();return(t,n,{cancelable:l=!1}={})=>{const s=e.$$.callbacks[t];if(s){const i=Je(t,n,{cancelable:l});return s.slice().forEach(o=>{o.call(e,i)}),!i.defaultPrevented}return!0}}function et(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const se=[],ye=[],pe=[],Ie=[],wt=Promise.resolve();let Pe=!1;function vt(){Pe||(Pe=!0,wt.then(tt))}function J(e){pe.push(e)}function ze(e){Ie.push(e)}const Se=new Set;let me=0;function tt(){const e=re;do{for(;me<se.length;){const t=se[me];me++,oe(t),bt(t.$$)}for(oe(null),se.length=0,me=0;ye.length;)ye.pop()();for(let t=0;t<pe.length;t+=1){const n=pe[t];Se.has(n)||(Se.add(n),n())}pe.length=0}while(se.length);for(;Ie.length;)Ie.pop()();Pe=!1,Se.clear(),oe(e)}function bt(e){if(e.fragment!==null){e.update(),Q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}let le;function yt(){return le||(le=Promise.resolve(),le.then(()=>{le=null})),le}function Te(e,t,n){e.dispatchEvent(Je(`${t?"intro":"outro"}${n}`))}const ge=new Set;let x;function kt(){x={r:0,c:[],p:x}}function St(){x.r||Q(x.c),x=x.p}function V(e,t){e&&e.i&&(ge.delete(e),e.i(t))}function te(e,t,n,l){if(e&&e.o){if(ge.has(e))return;ge.add(e),x.c.push(()=>{ge.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}const Tt={duration:0};function Ne(e,t,n,l){const s={direction:"both"};let i=t(e,n,s),o=l?0:1,r=null,u=null,c=null;function h(){c&&mt(e,c)}function p(d,b){const y=d.b-o;return b*=Math.abs(y),{a:o,b:d.b,d:y,duration:b,start:d.start,end:d.start+b,group:d.group}}function g(d){const{delay:b=0,duration:y=300,easing:T=st,tick:C=F,css:L}=i||Tt,P={start:rt()+b,b:d};d||(P.group=x,x.r+=1),r||u?u=P:(L&&(h(),c=Me(e,o,d,y,b,T,L)),d&&C(0,1),r=p(P,y),J(()=>Te(e,d,"start")),at(H=>{if(u&&H>u.start&&(r=p(u,y),u=null,Te(e,r.b,"start"),L&&(h(),c=Me(e,o,r.b,r.duration,0,T,i.css))),r){if(H>=r.end)C(o=r.b,1-o),Te(e,r.b,"end"),u||(r.b?h():--r.group.r||Q(r.group.c)),r=null;else if(H>=r.start){const E=H-r.start;o=r.a+r.d*T(E/r.duration),C(o,1-o)}}return!!(r||u)}))}return{run(d){$e(i)?yt().then(()=>{i=i(s),g(d)}):g(d)},end(){h(),r=u=null}}}function Re(e,t,n,l){const s=e.$$.props[t];s!==void 0&&(e.$$.bound[s]=n,l===void 0&&n(e.$$.ctx[s]))}function ke(e){e&&e.c()}function ae(e,t,n,l){const{fragment:s,after_update:i}=e.$$;s&&s.m(t,n),l||J(()=>{const o=e.$$.on_mount.map(Ue).filter($e);e.$$.on_destroy?e.$$.on_destroy.push(...o):Q(o),e.$$.on_mount=[]}),i.forEach(J)}function ce(e,t){const n=e.$$;n.fragment!==null&&(Q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function It(e,t){e.$$.dirty[0]===-1&&(se.push(e),vt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function fe(e,t,n,l,s,i,o,r=[-1]){const u=re;oe(e);const c=e.$$={fragment:null,ctx:[],props:i,update:F,not_equal:s,bound:Le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Le(),dirty:r,skip_bound:!1,root:t.target||u.$$.root};o&&o(c.root);let h=!1;if(c.ctx=n?n(e,t.props||{},(p,g,...d)=>{const b=d.length?d[0]:g;return c.ctx&&s(c.ctx[p],c.ctx[p]=b)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](b),h&&It(e,p)),g}):[],c.update(),h=!0,Q(c.before_update),c.fragment=l?l(c.ctx):!1,t.target){if(t.hydrate){const p=dt(t.target);c.fragment&&c.fragment.l(p),p.forEach(A)}else c.fragment&&c.fragment.c();t.intro&&V(e.$$.fragment),ae(e,t.target,t.anchor,t.customElement),tt()}oe(u)}class de{$destroy(){ce(this,1),this.$destroy=F}$on(t,n){if(!$e(n))return F;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(t){this.$$set&&!ot(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Pt(e){const t=e-1;return t*t*t+1}function Ae(e,{delay:t=0,duration:n=400,easing:l=Pt,x:s=0,y:i=0,opacity:o=0}={}){const r=getComputedStyle(e),u=+r.opacity,c=r.transform==="none"?"":r.transform,h=u*(1-o);return{delay:t,duration:n,easing:l,css:(p,g)=>`
			transform: ${c} translate(${(1-p)*s}px, ${(1-p)*i}px);
			opacity: ${u-h*g}`}}const $t="https://MTRData.kennymhhui.repl.co/lr?stnId={stn}";class Ct{constructor(t,n,l,s,i,o){G(this,"route_no");G(this,"train_length");G(this,"dest_zh");G(this,"dest_en");G(this,"time_num");G(this,"time_text");this.route_no=t,this.train_length=n,this.dest_zh=l,this.dest_en=s,this.time_text=o,this.time_num=i}}class f{constructor(t,n,l){G(this,"name");G(this,"initials");G(this,"platforms");this.name=n,this.initials=t,this.platforms=l}}function Ht(e){return $t.replace("{stn}",e)}const X=new Map([["1",new f("1","屯門碼頭|Tuen Mun Ferry Pier",[2,3,4,5,7])],["10",new f("10","美樂|Melody Garden",[1,2])],["15",new f("15","蝴蝶|Butterfly",[1,2])],["20",new f("20","輕鐵車廠|Light Rail Depot",[1,2])],["30",new f("30","龍門|Lung Mun",[1,2])],["40",new f("40","青山村|Tsing Shan Tsuen",[1,2])],["50",new f("50","青雲|Tsing Wun",[1,2])],["60",new f("60","建安|Kin On",[1,2])],["70",new f("70","河田|Ho Tin",[1,2])],["75",new f("75","蔡意橋|Choy Yee Bridge",[1,2])],["80",new f("80","澤豐|Affluence",[1,2])],["90",new f("90","屯門醫院|Tuen Mun Hospital",[1,2])],["100",new f("100","兆康|Siu Hong",[1,2,5,6])],["110",new f("110","麒麟|Kei Lun",[1,2])],["120",new f("120","青松|Ching Chung",[1,2])],["130",new f("130","建生|Kin Sang",[1,2])],["140",new f("140","田景|Tin King",[1,2,3])],["150",new f("150","良景|Leung King",[1,2])],["160",new f("160","新圍|San Wai",[1,2])],["170",new f("170","石排|Shek Pai",[1,2])],["180",new f("180","山景 (北)|Shan King (North)",[1])],["190",new f("190","山景 (南)|Shan King (South)",[1])],["200",new f("200","鳴琴|Ming Kum",[1,2])],["212",new f("212","大興 (北)|Tai Hing (North)",[1,2])],["220",new f("220","大興 (南)|Tai Hing (South)",[1,2])],["230",new f("230","銀圍|Ngan Wai",[1,2])],["240",new f("240","兆禧|Siu Hei",[1,2])],["250",new f("250","屯門泳池|Tuen Mun Swimming Pool",[1,2])],["260",new f("260","豐景園|Goodview Garden",[1,2])],["265",new f("265","兆麟|Siu Lun",[1,2])],["270",new f("270","安定|On Ting",[1,2])],["275",new f("275","友愛|Yau Oi",[1])],["280",new f("280","市中心|Town Centre",[4])],["295",new f("295","屯門|Tuen Mun",[1,2])],["300",new f("300","杯渡|Pui To",[1,2])],["310",new f("310","何福堂|Hoh Fuk Tong",[1,2])],["320",new f("320","新墟|San Hui",[1,2])],["330",new f("330","景峰|Prime View",[1,2])],["340",new f("340","鳳地|Fung Tei",[1,2])],["350",new f("350","藍地|Lam Tei",[1,2])],["360",new f("360","泥圍|Nai Wai",[1,2])],["370",new f("370","鍾屋村|Chung Uk Tsuen",[1,2])],["380",new f("380","洪水橋|Hung Shui Kiu",[1,2])],["390",new f("390","塘坊村|Tong Fong Tsuen",[1,2])],["400",new f("400","屏山|Ping Shan",[1,2])],["425",new f("425","坑尾村|Hang Mei Tsuen",[1,2])],["430",new f("430","天水圍|Tin Shui Wai",[1,2,3])],["435",new f("435","天慈|Tin Tsz",[1,2])],["445",new f("445","天耀|Tin Yiu",[1,2])],["448",new f("448","樂湖|Locwood",[1,2])],["450",new f("450","天湖|Tin Wu",[1,2])],["455",new f("455","銀座|Ginza",[1,2])],["460",new f("460","天瑞|Tin Shui",[1,2])],["468",new f("468","頌富|Chung Fu",[1,2])],["480",new f("480","天富|Tin Fu",[1,2])],["490",new f("490","翠湖|Chestwood",[1,2])],["500",new f("500","天榮|Tin Wing",[6,7])],["510",new f("510","天悅|Tin Yuet",[1,2])],["520",new f("520","天秀|Tin Sau",[1,2])],["530",new f("530","濕地公園|Wetland Park",[1,2])],["540",new f("540","天恒|Tin Heng",[1,2])],["550",new f("550","天逸|Tin Yat",[1,2,4,5])],["560",new f("560","水邊圍|Shui Pin Wai",[1,2])],["570",new f("570","豐年路|Fung Nin Road",[1,2])],["580",new f("580","康樂路|Hong Lok Road",[1,2])],["590",new f("590","大棠路|Tai Tong Road",[1,2])],["600",new f("600","元朗|Yuen Long",[2,3,4,5])],["920",new f("920","三聖|Sam Shing",[1,3])]]);function Et(e){let t,n,l,s,i,o,r,u,c,h,p,g=(e[3]||"站名")+"",d,b,y,T,C=(e[4]||"Station Name")+"",L,P,H,E,j,W,U,Z;return{c(){t=m("div"),n=m("table"),l=m("tr"),s=m("td"),i=m("span"),o=R(e[0]),r=$(),u=m("div"),u.innerHTML="月台<br/>Platform",c=$(),h=m("td"),p=m("span"),d=R(g),b=m("br"),y=$(),T=m("span"),L=R(C),P=$(),H=m("td"),E=R(e[1]),j=R(":"),W=R(e[2]),_(i,"class","platcircle svelte-18u92w0"),_(u,"class","plattext svelte-18u92w0"),_(s,"class","platformCell svelte-18u92w0"),_(p,"class","sizeZH svelte-18u92w0"),_(T,"class","en"),_(h,"class","stnName svelte-18u92w0"),_(h,"role","button"),_(h,"tabindex","0"),_(h,"title","Show Config Menu"),_(H,"class","clock svelte-18u92w0"),_(n,"id","titlebarTB"),_(n,"class","svelte-18u92w0"),_(t,"id","titlebar"),_(t,"class","svelte-18u92w0")},m(D,N){O(D,t,N),a(t,n),a(n,l),a(l,s),a(s,i),a(i,o),a(s,r),a(s,u),a(l,c),a(l,h),a(h,p),a(p,d),a(h,b),a(h,y),a(h,T),a(T,L),a(l,P),a(l,H),a(H,E),a(H,j),a(H,W),U||(Z=[ie(h,"click",e[5]),ie(h,"keypress",e[5])],U=!0)},p(D,[N]){N&1&&K(o,D[0]),N&8&&g!==(g=(D[3]||"站名")+"")&&K(d,g),N&16&&C!==(C=(D[4]||"Station Name")+"")&&K(L,C),N&2&&K(E,D[1]),N&4&&K(W,D[2])},i:F,o:F,d(D){D&&A(t),U=!1,Q(Z)}}}function Lt(e,t,n){let{stnId:l}=t,{platform:s}=t;const i=gt();let o=new Date,r,u,c,h;function p(){i("showConfig")}function g(){n(8,o=new Date)}return He(()=>{const d=setInterval(g,2e3);return g(),()=>clearInterval(d)}),e.$$set=d=>{"stnId"in d&&n(6,l=d.stnId),"platform"in d&&n(0,s=d.platform)},e.$$.update=()=>{var d,b;e.$$.dirty&256&&n(1,r=o.getHours().toString().padStart(2,"0")),e.$$.dirty&256&&n(2,u=o.getMinutes().toString().padStart(2,"0")),e.$$.dirty&64&&n(3,c=((d=X.get(l))==null?void 0:d.name.split("|")[0])||""),e.$$.dirty&64&&n(4,h=((b=X.get(l))==null?void 0:b.name.split("|")[1])||"")},[s,r,u,c,h,p,l,g,o]}class Dt extends de{constructor(t){super(),fe(this,t,Lt,Et,ue,{stnId:6,platform:0,updateDate:7})}get updateDate(){return this.$$.ctx[7]}}function Oe(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function Fe(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function Mt(e){let t;return{c(){t=m("tr"),t.innerHTML=`<td class="lineHeightDouble sizeDouble svelte-1k2x9h5"> </td> 
              <td class="svelte-1k2x9h5"></td> 
              <td class="svelte-1k2x9h5"></td> 
              <td class="svelte-1k2x9h5"></td> 
            `,_(t,"class","arrRow svelte-1k2x9h5")},m(n,l){O(n,t,l)},p:F,d(n){n&&A(t)}}}function zt(e){let t,n,l=e[0][e[6]].route_no+"",s,i,o,r,u=e[0][e[6]].dest_zh+"",c,h,p=e[0][e[6]].dest_en+"",g,d,b,y,T,C,L,P=e[0][e[6]].time_num+"",H,E,j=e[0][e[6]].time_text.split("|")[0]+"",W,U,Z=e[0][e[6]].time_text.split("|")[1]+"",D,N,B={length:e[0][e[6]].train_length},M=[];for(let w=0;w<B.length;w+=1)M[w]=Ke(Fe(e,B,w));return{c(){t=m("tr"),n=m("td"),s=R(l),i=$(),o=m("td"),r=m("span"),c=R(u),h=m("br"),g=R(p),d=$(),b=m("td"),y=m("div");for(let w=0;w<M.length;w+=1)M[w].c();T=$(),C=m("td"),L=m("span"),H=R(P),E=m("span"),W=R(j),U=m("br"),D=R(Z),N=$(),_(n,"class","lineHeightDouble sizeDouble svelte-1k2x9h5"),_(r,"class","sizeZH svelte-1k2x9h5"),_(o,"class","svelte-1k2x9h5"),_(y,"class","cars svelte-1k2x9h5"),_(b,"class","svelte-1k2x9h5"),_(L,"class","sizeDouble multiLine svelte-1k2x9h5"),_(E,"class","eta"),_(C,"class","svelte-1k2x9h5"),_(t,"class","arrRow svelte-1k2x9h5")},m(w,k){O(w,t,k),a(t,n),a(n,s),a(t,i),a(t,o),a(o,r),a(r,c),a(o,h),a(o,g),a(t,d),a(t,b),a(b,y);for(let I=0;I<M.length;I+=1)M[I].m(y,null);a(t,T),a(t,C),a(C,L),a(L,H),a(C,E),a(E,W),a(E,U),a(E,D),a(t,N)},p(w,k){if(k&1&&l!==(l=w[0][w[6]].route_no+"")&&K(s,l),k&1&&u!==(u=w[0][w[6]].dest_zh+"")&&K(c,u),k&1&&p!==(p=w[0][w[6]].dest_en+"")&&K(g,p),k&1){B={length:w[0][w[6]].train_length};let I;for(I=0;I<B.length;I+=1){const z=Fe(w,B,I);M[I]?M[I].p(z,k):(M[I]=Ke(z),M[I].c(),M[I].m(y,null))}for(;I<M.length;I+=1)M[I].d(1);M.length=B.length}k&1&&P!==(P=w[0][w[6]].time_num+"")&&K(H,P),k&1&&j!==(j=w[0][w[6]].time_text.split("|")[0]+"")&&K(W,j),k&1&&Z!==(Z=w[0][w[6]].time_text.split("|")[1]+"")&&K(D,Z)},d(w){w&&A(t),we(M,w)}}}function Ke(e){let t,n;return{c(){t=m("img"),_(t,"class","car svelte-1k2x9h5"),it(t.src,n="img/lrv.png")||_(t,"src",n),_(t,"alt","LRV Car "+e[6])},m(l,s){O(l,t,s)},p:F,d(l){l&&A(t)}}}function We(e){let t;function n(i,o){return i[6]<i[0].length?zt:Mt}let l=n(e),s=l(e);return{c(){s.c(),t=ft()},m(i,o){s.m(i,o),O(i,t,o)},p(i,o){l===(l=n(i))&&s?s.p(i,o):(s.d(1),s=l(i),s&&(s.c(),s.m(t.parentNode,t)))},d(i){s.d(i),i&&A(t)}}}function Nt(e){let t,n,l,s,i={length:Ze},o=[];for(let r=0;r<i.length;r+=1)o[r]=We(Oe(e,i,r));return{c(){t=m("main"),n=m("table"),l=m("tr"),l.innerHTML=`<td class="svelte-1k2x9h5"><span class="sizeZH svelte-1k2x9h5">路線</span><br/>Route</td> 
            <td class="svelte-1k2x9h5"><span class="sizeZH svelte-1k2x9h5">目的地</span><br/>Destination</td> 
            <td class="svelte-1k2x9h5"></td> 
            <td class="svelte-1k2x9h5"><span class="sizeZH svelte-1k2x9h5">下班車</span><br/>Next Train</td>`,s=$();for(let r=0;r<o.length;r+=1)o[r].c();_(l,"class","header svelte-1k2x9h5"),_(n,"id","eta"),_(n,"class","svelte-1k2x9h5"),_(t,"class","svelte-1k2x9h5")},m(r,u){O(r,t,u),a(t,n),a(n,l),a(n,s);for(let c=0;c<o.length;c+=1)o[c].m(n,null)},p(r,[u]){if(u&1){i={length:Ze};let c;for(c=0;c<i.length;c+=1){const h=Oe(r,i,c);o[c]?o[c].p(h,u):(o[c]=We(h),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=i.length}},i:F,o:F,d(r){r&&A(t),we(o,r)}}}const Ze=10;function Rt(e,t,n){let{stnId:l}=t,{targetPlatform:s}=t,i=[];async function o(r,u){if(r==null||u==null)return;let h=await(await fetch(Ht(r))).json();if(h==null||h.status!=1)return;let p=[];for(let g of h.platform_list)if(g.platform_id===u)for(let d of g.route_list){if(d.stop===1)continue;let b,y;d.time_en.includes("min")?(b="分鐘|min",y=d.time_en.split(" min")[0]):d.time_en==="-"?(b=" | ",y="-"):(y="",b=`${d.time_ch}|${d.time_en}`);let T=new Ct(d.route_no,d.train_length,d.dest_ch,d.dest_en,y,b);p.push(T)}n(0,i=p)}return He(async()=>{const r=setInterval(async()=>await o(l,s),1e4);return()=>clearInterval(r)}),e.$$set=r=>{"stnId"in r&&n(1,l=r.stnId),"targetPlatform"in r&&n(2,s=r.targetPlatform)},e.$$.update=()=>{e.$$.dirty&6&&o(l,s)},[i,l,s]}class At extends de{constructor(t){super(),fe(this,t,Rt,Nt,ue,{stnId:1,targetPlatform:2})}}function Ot(e){let t,n,l,s;return t=new Dt({props:{stnId:e[0],platform:e[1]}}),t.$on("showConfig",e[2]),l=new At({props:{stnId:e[0],targetPlatform:e[1]}}),{c(){ke(t.$$.fragment),n=$(),ke(l.$$.fragment)},m(i,o){ae(t,i,o),O(i,n,o),ae(l,i,o),s=!0},p(i,[o]){const r={};o&1&&(r.stnId=i[0]),o&2&&(r.platform=i[1]),t.$set(r);const u={};o&1&&(u.stnId=i[0]),o&2&&(u.targetPlatform=i[1]),l.$set(u)},i(i){s||(V(t.$$.fragment,i),V(l.$$.fragment,i),s=!0)},o(i){te(t.$$.fragment,i),te(l.$$.fragment,i),s=!1},d(i){ce(t,i),i&&A(n),ce(l,i)}}}function Ft(e,t,n){let{stnId:l}=t,{platform:s}=t;function i(o){et.call(this,e,o)}return e.$$set=o=>{"stnId"in o&&n(0,l=o.stnId),"platform"in o&&n(1,s=o.platform)},[l,s,i]}class Kt extends de{constructor(t){super(),fe(this,t,Ft,Ot,ue,{stnId:0,platform:1})}}function je(e,t,n){const l=e.slice();return l[5]=t[n],l}function Be(e,t,n){const l=e.slice();return l[8]=t[n][0],l[9]=t[n][1],l}function Ye(e){let t,n=e[9].name.replace("|"," ")+"",l;return{c(){t=m("option"),l=R(n),t.__value=e[8],t.value=t.__value},m(s,i){O(s,t,i),a(t,l)},p:F,d(s){s&&A(t)}}}function qe(e){let t,n=e[5]+"",l,s;return{c(){t=m("option"),l=R(n),t.__value=s=e[5],t.value=t.__value},m(i,o){O(i,t,o),a(t,l)},p(i,o){o&1&&n!==(n=i[5]+"")&&K(l,n),o&1&&s!==(s=i[5])&&(t.__value=s,t.value=t.__value)},d(i){i&&A(t)}}}function Wt(e){var Ee;let t,n,l,s,i,o,r,u,c,h,p,g,d,b,y,T,C,L,P,H,E,j,W,U,Z,D,N,B,M,w=[...X],k=[];for(let v=0;v<w.length;v+=1)k[v]=Ye(Be(e,w,v));let I=((Ee=X.get(e[0]))==null?void 0:Ee.platforms)??[],z=[];for(let v=0;v<I.length;v+=1)z[v]=qe(je(e,I,v));return{c(){t=m("main"),n=m("h1"),n.textContent="輕鐵資訊顯示屏模擬器",l=$(),s=m("h3"),s.textContent="Light Rail PIDS Simulator",i=$(),o=m("hr"),r=$(),u=m("table"),c=m("tr"),h=m("td"),h.innerHTML='<span class="sizeZH svelte-hof67c">車站</span><br/><span class="sizeEN svelte-hof67c">Station</span>',p=$(),g=m("td"),d=m("select");for(let v=0;v<k.length;v+=1)k[v].c();b=$(),y=m("tr"),T=m("td"),T.innerHTML='<span class="sizeZH svelte-hof67c">月台</span><br/><span class="sizeEN svelte-hof67c">Platform</span>',C=$(),L=m("td"),P=m("select");for(let v=0;v<z.length;v+=1)z[v].c();H=$(),E=m("button"),E.textContent="開始 Start",j=$(),W=m("p"),W.textContent="如需要再顯示此菜單，請按頂部的車站名",U=$(),Z=m("p"),Z.textContent="Click the station name at the top to return to this menu.",D=$(),N=m("footer"),N.innerHTML="<p>HKTSS 2023</p>",_(n,"class","sizeZH svelte-hof67c"),_(s,"class","sizeEN svelte-hof67c"),_(h,"class","svelte-hof67c"),_(d,"id","stnOpt"),_(d,"class","svelte-hof67c"),e[0]===void 0&&J(()=>e[3].call(d)),_(g,"class","svelte-hof67c"),_(c,"class","svelte-hof67c"),_(T,"class","svelte-hof67c"),_(P,"id","platOpt"),_(P,"class","svelte-hof67c"),e[1]===void 0&&J(()=>e[4].call(P)),_(L,"class","svelte-hof67c"),_(y,"class","svelte-hof67c"),_(u,"id","cfgTable"),_(u,"class","svelte-hof67c"),_(E,"class","closeBtn svelte-hof67c"),_(t,"class","svelte-hof67c"),_(N,"class","svelte-hof67c")},m(v,Y){O(v,t,Y),a(t,n),a(t,l),a(t,s),a(t,i),a(t,o),a(t,r),a(t,u),a(u,c),a(c,h),a(c,p),a(c,g),a(g,d);for(let q=0;q<k.length;q+=1)k[q].m(d,null);_e(d,e[0]),a(u,b),a(u,y),a(y,T),a(y,C),a(y,L),a(L,P);for(let q=0;q<z.length;q+=1)z[q].m(P,null);_e(P,e[1]),a(t,H),a(t,E),a(t,j),a(t,W),a(t,U),a(t,Z),O(v,D,Y),O(v,N,Y),B||(M=[ie(d,"change",e[3]),ie(P,"change",e[4]),ie(E,"click",e[2])],B=!0)},p(v,[Y]){var q;if(Y&0){w=[...X];let S;for(S=0;S<w.length;S+=1){const ne=Be(v,w,S);k[S]?k[S].p(ne,Y):(k[S]=Ye(ne),k[S].c(),k[S].m(d,null))}for(;S<k.length;S+=1)k[S].d(1);k.length=w.length}if(Y&1&&_e(d,v[0]),Y&1){I=((q=X.get(v[0]))==null?void 0:q.platforms)??[];let S;for(S=0;S<I.length;S+=1){const ne=je(v,I,S);z[S]?z[S].p(ne,Y):(z[S]=qe(ne),z[S].c(),z[S].m(P,null))}for(;S<z.length;S+=1)z[S].d(1);z.length=I.length}Y&3&&_e(P,v[1])},i:F,o:F,d(v){v&&A(t),we(k,v),we(z,v),v&&A(D),v&&A(N),B=!1,Q(M)}}}function Zt(e,t,n){let{stationId:l}=t,{selectedPlatform:s}=t;function i(u){et.call(this,e,u)}function o(){l=De(this),n(0,l)}function r(){s=De(this),n(1,s),n(0,l)}return e.$$set=u=>{"stationId"in u&&n(0,l=u.stationId),"selectedPlatform"in u&&n(1,s=u.selectedPlatform)},[l,s,i,o,r]}class jt extends de{constructor(t){super(),fe(this,t,Zt,Wt,ue,{stationId:0,selectedPlatform:1})}}function Ge(e){let t,n,l,s,i,o;function r(h){e[4](h)}function u(h){e[5](h)}let c={};return e[0]!==void 0&&(c.stationId=e[0]),e[1]!==void 0&&(c.selectedPlatform=e[1]),n=new jt({props:c}),ye.push(()=>Re(n,"stationId",r,e[0])),ye.push(()=>Re(n,"selectedPlatform",u,e[1])),n.$on("click",e[6]),{c(){t=m("div"),ke(n.$$.fragment),_(t,"class","portrait svelte-1yw8xfp")},m(h,p){O(h,t,p),ae(n,t,null),o=!0},p(h,p){const g={};!l&&p&1&&(l=!0,g.stationId=h[0],ze(()=>l=!1)),!s&&p&2&&(s=!0,g.selectedPlatform=h[1],ze(()=>s=!1)),n.$set(g)},i(h){o||(V(n.$$.fragment,h),J(()=>{i||(i=Ne(t,Ae,{y:25,duration:200},!0)),i.run(1)}),o=!0)},o(h){te(n.$$.fragment,h),i||(i=Ne(t,Ae,{y:25,duration:200},!1)),i.run(0),o=!1},d(h){h&&A(t),ce(n),h&&i&&i.end()}}}function Bt(e){let t,n,l,s,i;l=new Kt({props:{stnId:e[0],platform:e[1]}}),l.$on("showConfig",e[3]);let o=e[2]&&Ge(e);return{c(){t=m("main"),n=m("div"),ke(l.$$.fragment),s=$(),o&&o.c(),_(n,"class","portrait svelte-1yw8xfp"),_(t,"class","svelte-1yw8xfp")},m(r,u){O(r,t,u),a(t,n),ae(l,n,null),a(t,s),o&&o.m(t,null),i=!0},p(r,[u]){const c={};u&1&&(c.stnId=r[0]),u&2&&(c.platform=r[1]),l.$set(c),r[2]?o?(o.p(r,u),u&4&&V(o,1)):(o=Ge(r),o.c(),V(o,1),o.m(t,null)):o&&(kt(),te(o,1,1,()=>{o=null}),St())},i(r){i||(V(l.$$.fragment,r),V(o),i=!0)},o(r){te(l.$$.fragment,r),te(o),i=!1},d(r){r&&A(t),ce(l),o&&o.d()}}}function Yt(e,t){e!==void 0&&localStorage.setItem("stnId",e),t!==void 0&&localStorage.setItem("platform",t.toString())}function qt(e,t,n){let l,s,i=!1;function o(){let g=localStorage.getItem("platform"),d=localStorage.getItem("stnId");g==null||d==null?(n(0,l="1"),n(1,s=2),n(2,i=!0)):(n(0,l=d),n(1,s=parseInt(g)))}function r(){const g=new URLSearchParams(window.location.search),d=Object.fromEntries(g.entries());d.stnId!=null&&d.plat!=null&&(n(2,i=!1),n(0,l=d.stnId),n(1,s=parseInt(d.plat)))}He(()=>{o(),r()});const u=()=>n(2,i=!0);function c(g){l=g,n(0,l)}function h(g){s=g,n(1,s)}const p=()=>n(2,i=!1);return e.$$.update=()=>{e.$$.dirty&3&&Yt(l,s)},[l,s,i,u,c,h,p]}class Gt extends de{constructor(t){super(),fe(this,t,qt,Bt,ue,{})}}new Gt({target:document.getElementById("app")});
