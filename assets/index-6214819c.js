var lt=Object.defineProperty;var st=(e,t,n)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var U=(e,t,n)=>(st(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function q(){}const Ge=e=>e;function Ve(e){return e()}function He(){return Object.create(null)}function J(e){e.forEach(Ve)}function Ce(e){return typeof e=="function"}function ue(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let _e;function it(e,t){return _e||(_e=document.createElement("a")),_e.href=t,e===_e.href}function ot(e){return Object.keys(e).length===0}const Qe=typeof window<"u";let rt=Qe?()=>window.performance.now():()=>Date.now(),$e=Qe?e=>requestAnimationFrame(e):q;const ee=new Set;function Je(e){ee.forEach(t=>{t.c(e)||(ee.delete(t),t.f())}),ee.size!==0&&$e(Je)}function at(e){let t;return ee.size===0&&$e(Je),{promise:new Promise(n=>{ee.add(t={c:e,f:n})}),abort(){ee.delete(t)}}}function c(e,t){e.appendChild(t)}function Xe(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function ct(e){const t=h("style");return ut(Xe(e),t),t.sheet}function ut(e,t){return c(e.head||e,t),t.sheet}function O(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function ve(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function R(e){return document.createTextNode(e)}function P(){return R(" ")}function ft(){return R("")}function ie(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function dt(e){return Array.from(e.childNodes)}function F(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function he(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t){l.selected=!0;return}}e.selectedIndex=-1}function Me(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function xe(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,l,t),i}const we=new Map;let be=0;function _t(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function ht(e,t){const n={stylesheet:ct(t),rules:{}};return we.set(e,n),n}function ze(e,t,n,l,i,s,o,a=0){const r=16.666/l;let d=`{
`;for(let y=0;y<=1;y+=r){const C=t+(n-t)*s(y);d+=y*100+`%{${o(C,1-C)}}
`}const _=d+`100% {${o(n,1-n)}}
}`,p=`__svelte_${_t(_)}_${a}`,g=Xe(e),{stylesheet:f,rules:v}=we.get(g)||ht(g,e);v[p]||(v[p]=!0,f.insertRule(`@keyframes ${p} ${_}`,f.cssRules.length));const k=e.style.animation||"";return e.style.animation=`${k?`${k}, `:""}${p} ${l}ms linear ${i}ms 1 both`,be+=1,p}function mt(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),i=n.length-l.length;i&&(e.style.animation=l.join(", "),be-=i,be||pt())}function pt(){$e(()=>{be||(we.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&A(t)}),we.clear())})}let re;function oe(e){re=e}function et(){if(!re)throw new Error("Function called outside component initialization");return re}function Le(e){et().$$.on_mount.push(e)}function gt(){const e=et();return(t,n,{cancelable:l=!1}={})=>{const i=e.$$.callbacks[t];if(i){const s=xe(t,n,{cancelable:l});return i.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}function tt(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const se=[],ye=[],pe=[],Ie=[],vt=Promise.resolve();let Pe=!1;function wt(){Pe||(Pe=!0,vt.then(nt))}function X(e){pe.push(e)}function Ne(e){Ie.push(e)}const Se=new Set;let me=0;function nt(){const e=re;do{for(;me<se.length;){const t=se[me];me++,oe(t),bt(t.$$)}for(oe(null),se.length=0,me=0;ye.length;)ye.pop()();for(let t=0;t<pe.length;t+=1){const n=pe[t];Se.has(n)||(Se.add(n),n())}pe.length=0}while(se.length);for(;Ie.length;)Ie.pop()();Pe=!1,Se.clear(),oe(e)}function bt(e){if(e.fragment!==null){e.update(),J(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(X)}}let le;function yt(){return le||(le=Promise.resolve(),le.then(()=>{le=null})),le}function Te(e,t,n){e.dispatchEvent(xe(`${t?"intro":"outro"}${n}`))}const ge=new Set;let V;function kt(){V={r:0,c:[],p:V}}function St(){V.r||J(V.c),V=V.p}function Q(e,t){e&&e.i&&(ge.delete(e),e.i(t))}function te(e,t,n,l){if(e&&e.o){if(ge.has(e))return;ge.add(e),V.c.push(()=>{ge.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}const Tt={duration:0};function De(e,t,n,l){const i={direction:"both"};let s=t(e,n,i),o=l?0:1,a=null,r=null,d=null;function _(){d&&mt(e,d)}function p(f,v){const k=f.b-o;return v*=Math.abs(k),{a:o,b:f.b,d:k,duration:v,start:f.start,end:f.start+v,group:f.group}}function g(f){const{delay:v=0,duration:k=300,easing:y=Ge,tick:C=q,css:E}=s||Tt,$={start:rt()+v,b:f};f||($.group=V,V.r+=1),a||r?r=$:(E&&(_(),d=ze(e,o,f,k,v,y,E)),f&&C(0,1),a=p($,k),X(()=>Te(e,f,"start")),at(H=>{if(r&&H>r.start&&(a=p(r,k),r=null,Te(e,a.b,"start"),E&&(_(),d=ze(e,o,a.b,a.duration,0,y,s.css))),a){if(H>=a.end)C(o=a.b,1-o),Te(e,a.b,"end"),r||(a.b?_():--a.group.r||J(a.group.c)),a=null;else if(H>=a.start){const L=H-a.start;o=a.a+a.d*y(L/a.duration),C(o,1-o)}}return!!(a||r)}))}return{run(f){Ce(s)?yt().then(()=>{s=s(i),g(f)}):g(f)},end(){_(),a=r=null}}}function Re(e,t,n,l){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,l===void 0&&n(e.$$.ctx[i]))}function ke(e){e&&e.c()}function ae(e,t,n,l){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,n),l||X(()=>{const o=e.$$.on_mount.map(Ve).filter(Ce);e.$$.on_destroy?e.$$.on_destroy.push(...o):J(o),e.$$.on_mount=[]}),s.forEach(X)}function ce(e,t){const n=e.$$;n.fragment!==null&&(J(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function It(e,t){e.$$.dirty[0]===-1&&(se.push(e),wt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function fe(e,t,n,l,i,s,o,a=[-1]){const r=re;oe(e);const d=e.$$={fragment:null,ctx:[],props:s,update:q,not_equal:i,bound:He(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:He(),dirty:a,skip_bound:!1,root:t.target||r.$$.root};o&&o(d.root);let _=!1;if(d.ctx=n?n(e,t.props||{},(p,g,...f)=>{const v=f.length?f[0]:g;return d.ctx&&i(d.ctx[p],d.ctx[p]=v)&&(!d.skip_bound&&d.bound[p]&&d.bound[p](v),_&&It(e,p)),g}):[],d.update(),_=!0,J(d.before_update),d.fragment=l?l(d.ctx):!1,t.target){if(t.hydrate){const p=dt(t.target);d.fragment&&d.fragment.l(p),p.forEach(A)}else d.fragment&&d.fragment.c();t.intro&&Q(e.$$.fragment),ae(e,t.target,t.anchor,t.customElement),nt()}oe(r)}class de{$destroy(){ce(this,1),this.$destroy=q}$on(t,n){if(!Ce(n))return q;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(t){this.$$set&&!ot(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ae(e,{delay:t=0,duration:n=400,easing:l=Ge}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:l,css:s=>`opacity: ${s*i}`}}const Pt="https://MTRData.kennymhhui.repl.co/lr?stnId={stn}",Ct="https://rt.data.gov.hk/v1/transport/mtr/lrt/getSchedule?station_id={stn}";class $t{constructor(t,n,l,i,s,o){U(this,"route_no");U(this,"train_length");U(this,"dest_zh");U(this,"dest_en");U(this,"time_num");U(this,"time_text");this.route_no=t,this.train_length=n,this.dest_zh=l,this.dest_en=i,this.time_text=o,this.time_num=s}}class u{constructor(t,n,l){U(this,"name");U(this,"initials");U(this,"platforms");this.name=n,this.initials=t,this.platforms=l}}function Lt(e,t=!1){return(t?Ct:Pt).replace("{stn}",e)}const x=new Map([["1",new u("1","屯門碼頭|Tuen Mun Ferry Pier",[2,3,4,5,7])],["10",new u("10","美樂|Melody Garden",[1,2])],["15",new u("15","蝴蝶|Butterfly",[1,2])],["20",new u("20","輕鐵車廠|Light Rail Depot",[1,2])],["30",new u("30","龍門|Lung Mun",[1,2])],["40",new u("40","青山村|Tsing Shan Tsuen",[1,2])],["50",new u("50","青雲|Tsing Wun",[1,2])],["60",new u("60","建安|Kin On",[1,2])],["70",new u("70","河田|Ho Tin",[1,2])],["75",new u("75","蔡意橋|Choy Yee Bridge",[1,2])],["80",new u("80","澤豐|Affluence",[1,2])],["90",new u("90","屯門醫院|Tuen Mun Hospital",[1,2])],["100",new u("100","兆康|Siu Hong",[1,2,5,6])],["110",new u("110","麒麟|Kei Lun",[1,2])],["120",new u("120","青松|Ching Chung",[1,2])],["130",new u("130","建生|Kin Sang",[1,2])],["140",new u("140","田景|Tin King",[1,2,3])],["150",new u("150","良景|Leung King",[1,2])],["160",new u("160","新圍|San Wai",[1,2])],["170",new u("170","石排|Shek Pai",[1,2])],["180",new u("180","山景 (北)|Shan King (North)",[1])],["190",new u("190","山景 (南)|Shan King (South)",[1])],["200",new u("200","鳴琴|Ming Kum",[1,2])],["212",new u("212","大興 (北)|Tai Hing (North)",[1,2])],["220",new u("220","大興 (南)|Tai Hing (South)",[1,2])],["230",new u("230","銀圍|Ngan Wai",[1,2])],["240",new u("240","兆禧|Siu Hei",[1,2])],["250",new u("250","屯門泳池|Tuen Mun Swimming Pool",[1,2])],["260",new u("260","豐景園|Goodview Garden",[1,2])],["265",new u("265","兆麟|Siu Lun",[1,2])],["270",new u("270","安定|On Ting",[1,2])],["275",new u("275","友愛|Yau Oi",[1])],["280",new u("280","市中心|Town Centre",[4])],["295",new u("295","屯門|Tuen Mun",[1,2])],["300",new u("300","杯渡|Pui To",[1,2])],["310",new u("310","何福堂|Hoh Fuk Tong",[1,2])],["320",new u("320","新墟|San Hui",[1,2])],["330",new u("330","景峰|Prime View",[1,2])],["340",new u("340","鳳地|Fung Tei",[1,2])],["350",new u("350","藍地|Lam Tei",[1,2])],["360",new u("360","泥圍|Nai Wai",[1,2])],["370",new u("370","鍾屋村|Chung Uk Tsuen",[1,2])],["380",new u("380","洪水橋|Hung Shui Kiu",[1,2])],["390",new u("390","塘坊村|Tong Fong Tsuen",[1,2])],["400",new u("400","屏山|Ping Shan",[1,2])],["425",new u("425","坑尾村|Hang Mei Tsuen",[1,2])],["430",new u("430","天水圍|Tin Shui Wai",[1,2,3])],["435",new u("435","天慈|Tin Tsz",[1,2])],["445",new u("445","天耀|Tin Yiu",[1,2])],["448",new u("448","樂湖|Locwood",[1,2])],["450",new u("450","天湖|Tin Wu",[1,2])],["455",new u("455","銀座|Ginza",[1,2])],["460",new u("460","天瑞|Tin Shui",[1,2])],["468",new u("468","頌富|Chung Fu",[1,2])],["480",new u("480","天富|Tin Fu",[1,2])],["490",new u("490","翠湖|Chestwood",[1,2])],["500",new u("500","天榮|Tin Wing",[6,7])],["510",new u("510","天悅|Tin Yuet",[1,2])],["520",new u("520","天秀|Tin Sau",[1,2])],["530",new u("530","濕地公園|Wetland Park",[1,2])],["540",new u("540","天恒|Tin Heng",[1,2])],["550",new u("550","天逸|Tin Yat",[1,2,4,5])],["560",new u("560","水邊圍|Shui Pin Wai",[1,2])],["570",new u("570","豐年路|Fung Nin Road",[1,2])],["580",new u("580","康樂路|Hong Lok Road",[1,2])],["590",new u("590","大棠路|Tai Tong Road",[1,2])],["600",new u("600","元朗|Yuen Long",[2,3,4,5])],["920",new u("920","三聖|Sam Shing",[1,3])]]);function Et(e){let t,n,l,i,s,o,a,r,d,_,p,g=(e[3]||"站名")+"",f,v,k,y,C=(e[4]||"Station Name")+"",E,$,H,L,Z,K,G,W;return{c(){t=h("div"),n=h("table"),l=h("tr"),i=h("td"),s=h("span"),o=R(e[0]),a=P(),r=h("div"),r.innerHTML="月台<br/>Platform",d=P(),_=h("td"),p=h("span"),f=R(g),v=h("br"),k=P(),y=h("span"),E=R(C),$=P(),H=h("td"),L=R(e[1]),Z=R(":"),K=R(e[2]),m(s,"class","platcircle svelte-qg4tih"),m(r,"class","plattext svelte-qg4tih"),m(i,"class","platformCell svelte-qg4tih"),m(p,"class","sizeZH svelte-qg4tih"),m(y,"class","en"),m(_,"class","stnName svelte-qg4tih"),m(_,"role","button"),m(_,"tabindex","0"),m(_,"title","Show Config Menu"),m(H,"class","clock svelte-qg4tih"),m(n,"id","titlebarTB"),m(n,"class","svelte-qg4tih"),m(t,"id","titlebar"),m(t,"class","svelte-qg4tih")},m(M,D){O(M,t,D),c(t,n),c(n,l),c(l,i),c(i,s),c(s,o),c(i,a),c(i,r),c(l,d),c(l,_),c(_,p),c(p,f),c(_,v),c(_,k),c(_,y),c(y,E),c(l,$),c(l,H),c(H,L),c(H,Z),c(H,K),G||(W=[ie(_,"click",e[5]),ie(_,"keypress",e[5])],G=!0)},p(M,[D]){D&1&&F(o,M[0]),D&8&&g!==(g=(M[3]||"站名")+"")&&F(f,g),D&16&&C!==(C=(M[4]||"Station Name")+"")&&F(E,C),D&2&&F(L,M[1]),D&4&&F(K,M[2])},i:q,o:q,d(M){M&&A(t),G=!1,J(W)}}}function Ht(e,t,n){let{stnId:l}=t,{platform:i}=t;const s=gt();let o=new Date,a,r,d,_;function p(){s("showConfig")}function g(){n(8,o=new Date)}return Le(()=>{const f=setInterval(g,2e3);return g(),()=>clearInterval(f)}),e.$$set=f=>{"stnId"in f&&n(6,l=f.stnId),"platform"in f&&n(0,i=f.platform)},e.$$.update=()=>{var f,v;e.$$.dirty&256&&n(1,a=o.getHours().toString().padStart(2,"0")),e.$$.dirty&256&&n(2,r=o.getMinutes().toString().padStart(2,"0")),e.$$.dirty&64&&n(3,d=((f=x.get(l))==null?void 0:f.name.split("|")[0])||""),e.$$.dirty&64&&n(4,_=((v=x.get(l))==null?void 0:v.name.split("|")[1])||"")},[i,a,r,d,_,p,l,g,o]}class Mt extends de{constructor(t){super(),fe(this,t,Ht,Et,ue,{stnId:6,platform:0,updateDate:7})}get updateDate(){return this.$$.ctx[7]}}function Oe(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function qe(e,t,n){const l=e.slice();return l[4]=t[n],l[6]=n,l}function zt(e){let t;return{c(){t=h("div"),t.innerHTML=`<div class="sizeDouble svelte-pxmlct"> </div> 
            <div class="svelte-pxmlct"></div> 
            <div class="svelte-pxmlct"></div> 
            <div class="svelte-pxmlct"></div> 
          `,m(t,"class","arrRow svelte-pxmlct")},m(n,l){O(n,t,l)},p:q,d(n){n&&A(t)}}}function Nt(e){let t,n,l=e[0][e[6]].route_no+"",i,s,o,a,r=e[0][e[6]].dest_zh+"",d,_,p=e[0][e[6]].dest_en+"",g,f,v,k,y,C,E=e[0][e[6]].time_num+"",$,H,L,Z=e[0][e[6]].time_text.split("|")[0]+"",K,G,W=e[0][e[6]].time_text.split("|")[1]+"",M,D,j={length:e[0][e[6]].train_length},z=[];for(let w=0;w<j.length;w+=1)z[w]=Fe(qe(e,j,w));return{c(){t=h("div"),n=h("div"),i=R(l),s=P(),o=h("div"),a=h("span"),d=R(r),_=h("br"),g=R(p),f=P(),v=h("div");for(let w=0;w<z.length;w+=1)z[w].c();k=P(),y=h("div"),C=h("span"),$=R(E),H=P(),L=h("div"),K=R(Z),G=h("br"),M=R(W),D=P(),m(n,"class","sizeDouble svelte-pxmlct"),m(a,"class","sizeZH svelte-pxmlct"),m(o,"class","svelte-pxmlct"),m(v,"class","cars svelte-pxmlct"),m(C,"class","sizeDouble multiLine svelte-pxmlct"),m(L,"class","eta"),m(y,"class","svelte-pxmlct"),m(t,"class","row arrRow svelte-pxmlct")},m(w,S){O(w,t,S),c(t,n),c(n,i),c(t,s),c(t,o),c(o,a),c(a,d),c(o,_),c(o,g),c(t,f),c(t,v);for(let I=0;I<z.length;I+=1)z[I].m(v,null);c(t,k),c(t,y),c(y,C),c(C,$),c(y,H),c(y,L),c(L,K),c(L,G),c(L,M),c(t,D)},p(w,S){if(S&1&&l!==(l=w[0][w[6]].route_no+"")&&F(i,l),S&1&&r!==(r=w[0][w[6]].dest_zh+"")&&F(d,r),S&1&&p!==(p=w[0][w[6]].dest_en+"")&&F(g,p),S&1){j={length:w[0][w[6]].train_length};let I;for(I=0;I<j.length;I+=1){const N=qe(w,j,I);z[I]?z[I].p(N,S):(z[I]=Fe(N),z[I].c(),z[I].m(v,null))}for(;I<z.length;I+=1)z[I].d(1);z.length=j.length}S&1&&E!==(E=w[0][w[6]].time_num+"")&&F($,E),S&1&&Z!==(Z=w[0][w[6]].time_text.split("|")[0]+"")&&F(K,Z),S&1&&W!==(W=w[0][w[6]].time_text.split("|")[1]+"")&&F(M,W)},d(w){w&&A(t),ve(z,w)}}}function Fe(e){let t,n;return{c(){t=h("img"),m(t,"class","car svelte-pxmlct"),it(t.src,n="img/lrv.png")||m(t,"src",n),m(t,"alt","LRV Car "+e[6])},m(l,i){O(l,t,i)},p:q,d(l){l&&A(t)}}}function Ke(e){let t;function n(s,o){return s[6]<s[0].length?Nt:zt}let l=n(e),i=l(e);return{c(){i.c(),t=ft()},m(s,o){i.m(s,o),O(s,t,o)},p(s,o){l===(l=n(s))&&i?i.p(s,o):(i.d(1),i=l(s),i&&(i.c(),i.m(t.parentNode,t)))},d(s){i.d(s),s&&A(t)}}}function Dt(e){let t,n,l,i={length:We},s=[];for(let o=0;o<i.length;o+=1)s[o]=Ke(Oe(e,i,o));return{c(){t=h("main"),n=h("div"),n.innerHTML=`<div class="svelte-pxmlct"><span class="sizeZH svelte-pxmlct">路線</span><br/>Route</div> 
        <div class="svelte-pxmlct"><span class="sizeZH svelte-pxmlct">目的地</span><br/>Destination</div> 
        <div class="svelte-pxmlct"></div> 
        <div class="svelte-pxmlct"><span class="sizeZH svelte-pxmlct">下班車</span><br/>Next Train</div>`,l=P();for(let o=0;o<s.length;o+=1)s[o].c();m(n,"class","row header svelte-pxmlct"),m(t,"class","svelte-pxmlct")},m(o,a){O(o,t,a),c(t,n),c(t,l);for(let r=0;r<s.length;r+=1)s[r].m(t,null)},p(o,[a]){if(a&1){i={length:We};let r;for(r=0;r<i.length;r+=1){const d=Oe(o,i,r);s[r]?s[r].p(d,a):(s[r]=Ke(d),s[r].c(),s[r].m(t,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}},i:q,o:q,d(o){o&&A(t),ve(s,o)}}}const We=10;function Rt(e,t,n){let{stnId:l}=t,{targetPlatform:i}=t,s=[];async function o(a,r,d=!1){if(a==null||r==null)return;let _;try{_=await fetch(Lt(a,d))}catch{if(!d)return console.warn("Cannot fetch data from proxy server, falling back to MTR"),o(a,r,!0)}let p=await _.json();if(p.status!=1)return;let g=[];for(let f of p.platform_list)if(f.platform_id===r)for(let v of f.route_list){if(v.stop===1)continue;let k,y;v.time_en.includes("min")?(k="分鐘|min",y=v.time_en.split(" min")[0]):v.time_en==="-"?(k=" | ",y="-"):(y="",k=`${v.time_ch}|${v.time_en}`);let C=new $t(v.route_no,v.train_length,v.dest_ch,v.dest_en,y,k);g.push(C)}n(0,s=g)}return Le(async()=>{const a=setInterval(async()=>await o(l,i),1e4);return()=>clearInterval(a)}),e.$$set=a=>{"stnId"in a&&n(1,l=a.stnId),"targetPlatform"in a&&n(2,i=a.targetPlatform)},e.$$.update=()=>{e.$$.dirty&6&&o(l,i)},[s,l,i]}class At extends de{constructor(t){super(),fe(this,t,Rt,Dt,ue,{stnId:1,targetPlatform:2})}}function Ot(e){let t,n,l,i;return t=new Mt({props:{stnId:e[0],platform:e[1]}}),t.$on("showConfig",e[2]),l=new At({props:{stnId:e[0],targetPlatform:e[1]}}),{c(){ke(t.$$.fragment),n=P(),ke(l.$$.fragment)},m(s,o){ae(t,s,o),O(s,n,o),ae(l,s,o),i=!0},p(s,[o]){const a={};o&1&&(a.stnId=s[0]),o&2&&(a.platform=s[1]),t.$set(a);const r={};o&1&&(r.stnId=s[0]),o&2&&(r.targetPlatform=s[1]),l.$set(r)},i(s){i||(Q(t.$$.fragment,s),Q(l.$$.fragment,s),i=!0)},o(s){te(t.$$.fragment,s),te(l.$$.fragment,s),i=!1},d(s){ce(t,s),s&&A(n),ce(l,s)}}}function qt(e,t,n){let{stnId:l}=t,{platform:i}=t;function s(o){tt.call(this,e,o)}return e.$$set=o=>{"stnId"in o&&n(0,l=o.stnId),"platform"in o&&n(1,i=o.platform)},[l,i,s]}class Ft extends de{constructor(t){super(),fe(this,t,qt,Ot,ue,{stnId:0,platform:1})}}function Ze(e,t,n){const l=e.slice();return l[5]=t[n],l}function je(e,t,n){const l=e.slice();return l[8]=t[n][0],l[9]=t[n][1],l}function Be(e){let t,n=e[9].name.replace("|"," ")+"",l;return{c(){t=h("option"),l=R(n),t.__value=e[8],t.value=t.__value},m(i,s){O(i,t,s),c(t,l)},p:q,d(i){i&&A(t)}}}function Ye(e){let t,n=e[5]+"",l,i;return{c(){t=h("option"),l=R(n),t.__value=i=e[5],t.value=t.__value},m(s,o){O(s,t,o),c(t,l)},p(s,o){o&1&&n!==(n=s[5]+"")&&F(l,n),o&1&&i!==(i=s[5])&&(t.__value=i,t.value=t.__value)},d(s){s&&A(t)}}}function Kt(e){var Ee;let t,n,l,i,s,o,a,r,d,_,p,g,f,v,k,y,C,E,$,H,L,Z,K,G,W,M,D,j,z,w=[...x],S=[];for(let b=0;b<w.length;b+=1)S[b]=Be(je(e,w,b));let I=((Ee=x.get(e[0]))==null?void 0:Ee.platforms)??[],N=[];for(let b=0;b<I.length;b+=1)N[b]=Ye(Ze(e,I,b));return{c(){t=h("main"),n=h("h1"),n.textContent="輕鐵資訊顯示屏模擬器",l=P(),i=h("h3"),i.textContent="Light Rail PIDS Simulator",s=P(),o=h("hr"),a=P(),r=h("table"),d=h("tr"),_=h("td"),_.innerHTML='<span class="sizeZH svelte-v2nkaw">車站</span><br/><span class="sizeEN svelte-v2nkaw">Station</span>',p=P(),g=h("td"),f=h("select");for(let b=0;b<S.length;b+=1)S[b].c();v=P(),k=h("tr"),y=h("td"),y.innerHTML='<span class="sizeZH svelte-v2nkaw">月台</span><br/><span class="sizeEN svelte-v2nkaw">Platform</span>',C=P(),E=h("td"),$=h("select");for(let b=0;b<N.length;b+=1)N[b].c();H=P(),L=h("button"),L.textContent="開始 Start",Z=P(),K=h("p"),K.textContent="如需要再顯示此菜單，請按頂部的車站名",G=P(),W=h("p"),W.textContent="Click the station name at the top to return to this menu.",M=P(),D=h("footer"),D.innerHTML=`<p class="svelte-v2nkaw">HKTSS 2023</p> 
    <p class="svelte-v2nkaw"><a href="https://hktss.github.io/mtr-pids/" class="svelte-v2nkaw">願景資訊顯示屏模擬器</a></p>`,m(n,"class","sizeZH svelte-v2nkaw"),m(i,"class","sizeEN svelte-v2nkaw"),m(_,"class","svelte-v2nkaw"),m(f,"id","stnOpt"),m(f,"class","svelte-v2nkaw"),e[0]===void 0&&X(()=>e[3].call(f)),m(g,"class","svelte-v2nkaw"),m(d,"class","svelte-v2nkaw"),m(y,"class","svelte-v2nkaw"),m($,"id","platOpt"),m($,"class","svelte-v2nkaw"),e[1]===void 0&&X(()=>e[4].call($)),m(E,"class","svelte-v2nkaw"),m(k,"class","svelte-v2nkaw"),m(r,"id","cfgTable"),m(r,"class","svelte-v2nkaw"),m(L,"class","closeBtn svelte-v2nkaw"),m(t,"class","svelte-v2nkaw"),m(D,"class","svelte-v2nkaw")},m(b,B){O(b,t,B),c(t,n),c(t,l),c(t,i),c(t,s),c(t,o),c(t,a),c(t,r),c(r,d),c(d,_),c(d,p),c(d,g),c(g,f);for(let Y=0;Y<S.length;Y+=1)S[Y].m(f,null);he(f,e[0]),c(r,v),c(r,k),c(k,y),c(k,C),c(k,E),c(E,$);for(let Y=0;Y<N.length;Y+=1)N[Y].m($,null);he($,e[1]),c(t,H),c(t,L),c(t,Z),c(t,K),c(t,G),c(t,W),O(b,M,B),O(b,D,B),j||(z=[ie(f,"change",e[3]),ie($,"change",e[4]),ie(L,"click",e[2])],j=!0)},p(b,[B]){var Y;if(B&0){w=[...x];let T;for(T=0;T<w.length;T+=1){const ne=je(b,w,T);S[T]?S[T].p(ne,B):(S[T]=Be(ne),S[T].c(),S[T].m(f,null))}for(;T<S.length;T+=1)S[T].d(1);S.length=w.length}if(B&1&&he(f,b[0]),B&1){I=((Y=x.get(b[0]))==null?void 0:Y.platforms)??[];let T;for(T=0;T<I.length;T+=1){const ne=Ze(b,I,T);N[T]?N[T].p(ne,B):(N[T]=Ye(ne),N[T].c(),N[T].m($,null))}for(;T<N.length;T+=1)N[T].d(1);N.length=I.length}B&3&&he($,b[1])},i:q,o:q,d(b){b&&A(t),ve(S,b),ve(N,b),b&&A(M),b&&A(D),j=!1,J(z)}}}function Wt(e,t,n){let{stationId:l}=t,{selectedPlatform:i}=t;function s(r){tt.call(this,e,r)}function o(){l=Me(this),n(0,l)}function a(){i=Me(this),n(1,i),n(0,l)}return e.$$set=r=>{"stationId"in r&&n(0,l=r.stationId),"selectedPlatform"in r&&n(1,i=r.selectedPlatform)},[l,i,s,o,a]}class Zt extends de{constructor(t){super(),fe(this,t,Wt,Kt,ue,{stationId:0,selectedPlatform:1})}}function Ue(e){let t,n,l,i,s,o;function a(_){e[4](_)}function r(_){e[5](_)}let d={};return e[0]!==void 0&&(d.stationId=e[0]),e[1]!==void 0&&(d.selectedPlatform=e[1]),n=new Zt({props:d}),ye.push(()=>Re(n,"stationId",a,e[0])),ye.push(()=>Re(n,"selectedPlatform",r,e[1])),n.$on("click",e[6]),{c(){t=h("div"),ke(n.$$.fragment),m(t,"class","portrait svelte-vsivdu")},m(_,p){O(_,t,p),ae(n,t,null),o=!0},p(_,p){const g={};!l&&p&1&&(l=!0,g.stationId=_[0],Ne(()=>l=!1)),!i&&p&2&&(i=!0,g.selectedPlatform=_[1],Ne(()=>i=!1)),n.$set(g)},i(_){o||(Q(n.$$.fragment,_),X(()=>{s||(s=De(t,Ae,{duration:100},!0)),s.run(1)}),o=!0)},o(_){te(n.$$.fragment,_),s||(s=De(t,Ae,{duration:100},!1)),s.run(0),o=!1},d(_){_&&A(t),ce(n),_&&s&&s.end()}}}function jt(e){let t,n,l,i,s;l=new Ft({props:{stnId:e[0],platform:e[1]}}),l.$on("showConfig",e[3]);let o=e[2]&&Ue(e);return{c(){t=h("main"),n=h("div"),ke(l.$$.fragment),i=P(),o&&o.c(),m(n,"class","portrait svelte-vsivdu"),m(t,"class","svelte-vsivdu")},m(a,r){O(a,t,r),c(t,n),ae(l,n,null),c(t,i),o&&o.m(t,null),s=!0},p(a,[r]){const d={};r&1&&(d.stnId=a[0]),r&2&&(d.platform=a[1]),l.$set(d),a[2]?o?(o.p(a,r),r&4&&Q(o,1)):(o=Ue(a),o.c(),Q(o,1),o.m(t,null)):o&&(kt(),te(o,1,1,()=>{o=null}),St())},i(a){s||(Q(l.$$.fragment,a),Q(o),s=!0)},o(a){te(l.$$.fragment,a),te(o),s=!1},d(a){a&&A(t),ce(l),o&&o.d()}}}function Bt(e,t){e!==void 0&&localStorage.setItem("stnId",e),t!==void 0&&localStorage.setItem("platform",t.toString())}function Yt(e,t,n){let l,i,s=!1;function o(){let g=localStorage.getItem("platform"),f=localStorage.getItem("stnId");g==null||f==null?(n(0,l="1"),n(1,i=2),n(2,s=!0)):(n(0,l=f),n(1,i=parseInt(g)))}function a(){const g=new URLSearchParams(window.location.search),f=Object.fromEntries(g.entries());f.stnId!=null&&f.plat!=null&&(n(2,s=!1),n(0,l=f.stnId),n(1,i=parseInt(f.plat)))}Le(()=>{o(),a()});const r=()=>n(2,s=!0);function d(g){l=g,n(0,l)}function _(g){i=g,n(1,i)}const p=()=>n(2,s=!1);return e.$$.update=()=>{e.$$.dirty&3&&Bt(l,i)},[l,i,s,r,d,_,p]}class Ut extends de{constructor(t){super(),fe(this,t,Yt,jt,ue,{})}}new Ut({target:document.getElementById("app")});
