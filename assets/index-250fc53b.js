var bt=Object.defineProperty;var wt=(e,t,n)=>t in e?bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Y=(e,t,n)=>(wt(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function K(){}const ct=e=>e;function ft(e){return e()}function Qe(){return Object.create(null)}function X(e){e.forEach(ft)}function Ke(e){return typeof e=="function"}function ve(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ye;function St(e,t){return ye||(ye=document.createElement("a")),ye.href=t,e===ye.href}function yt(e){return Object.keys(e).length===0}function Te(e){return e??""}const dt=typeof window<"u";let kt=dt?()=>window.performance.now():()=>Date.now(),Ze=dt?e=>requestAnimationFrame(e):K;const re=new Set;function _t(e){re.forEach(t=>{t.c(e)||(re.delete(t),t.f())}),re.size!==0&&Ze(_t)}function It(e){let t;return re.size===0&&Ze(_t),{promise:new Promise(n=>{re.add(t={c:e,f:n})}),abort(){re.delete(t)}}}function u(e,t){e.appendChild(t)}function mt(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Mt(e){const t=m("style");return Tt(mt(e),t),t.sheet}function Tt(e,t){return u(e.head||e,t),t.sheet}function N(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode&&e.parentNode.removeChild(e)}function ze(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function L(e){return document.createTextNode(e)}function T(){return L(" ")}function zt(){return L("")}function V(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ht(e){return Array.from(e.childNodes)}function F(e,t){t=""+t,e.data!==t&&(e.data=t)}function ne(e,t,n){for(let l=0;l<e.options.length;l+=1){const i=e.options[l];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Re(e){const t=e.querySelector(":checked");return t&&t.__value}function ht(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,l,t),i}const He=new Map;let Pe=0;function Pt(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ct(e,t){const n={stylesheet:Mt(t),rules:{}};return He.set(e,n),n}function Je(e,t,n,l,i,s,o,a=0){const r=16.666/l;let c=`{
`;for(let v=0;v<=1;v+=r){const S=t+(n-t)*s(v);c+=v*100+`%{${o(S,1-S)}}
`}const g=c+`100% {${o(n,1-n)}}
}`,_=`__svelte_${Pt(g)}_${a}`,b=mt(e),{stylesheet:d,rules:w}=He.get(b)||Ct(b,e);w[_]||(w[_]=!0,d.insertRule(`@keyframes ${_} ${g}`,d.cssRules.length));const p=e.style.animation||"";return e.style.animation=`${p?`${p}, `:""}${_} ${l}ms linear ${i}ms 1 both`,Pe+=1,_}function Et(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),i=n.length-l.length;i&&(e.style.animation=l.join(", "),Pe-=i,Pe||Lt())}function Lt(){Ze(()=>{Pe||(He.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&C(t)}),He.clear())})}let he;function me(e){he=e}function pt(){if(!he)throw new Error("Function called outside component initialization");return he}function We(e){pt().$$.on_mount.push(e)}function Dt(){const e=pt();return(t,n,{cancelable:l=!1}={})=>{const i=e.$$.callbacks[t];if(i){const s=ht(t,n,{cancelable:l});return i.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}function gt(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const se=[],ie=[];let ae=[];const je=[],Nt=Promise.resolve();let Fe=!1;function Rt(){Fe||(Fe=!0,Nt.then(vt))}function J(e){ae.push(e)}function ke(e){je.push(e)}const Oe=new Set;let le=0;function vt(){if(le!==0)return;const e=he;do{try{for(;le<se.length;){const t=se[le];le++,me(t),Ot(t.$$)}}catch(t){throw se.length=0,le=0,t}for(me(null),se.length=0,le=0;ie.length;)ie.pop()();for(let t=0;t<ae.length;t+=1){const n=ae[t];Oe.has(n)||(Oe.add(n),n())}ae.length=0}while(se.length);for(;je.length;)je.pop()();Fe=!1,Oe.clear(),me(e)}function Ot(e){if(e.fragment!==null){e.update(),X(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}function At(e){const t=[],n=[];ae.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),ae=t}let _e;function jt(){return _e||(_e=Promise.resolve(),_e.then(()=>{_e=null})),_e}function Ae(e,t,n){e.dispatchEvent(ht(`${t?"intro":"outro"}${n}`))}const Me=new Set;let U;function Ft(){U={r:0,c:[],p:U}}function Kt(){U.r||X(U.c),U=U.p}function Q(e,t){e&&e.i&&(Me.delete(e),e.i(t))}function ue(e,t,n,l){if(e&&e.o){if(Me.has(e))return;Me.add(e),U.c.push(()=>{Me.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}const Zt={duration:0};function Xe(e,t,n,l){const i={direction:"both"};let s=t(e,n,i),o=l?0:1,a=null,r=null,c=null;function g(){c&&Et(e,c)}function _(d,w){const p=d.b-o;return w*=Math.abs(p),{a:o,b:d.b,d:p,duration:w,start:d.start,end:d.start+w,group:d.group}}function b(d){const{delay:w=0,duration:p=300,easing:v=ct,tick:S=K,css:H}=s||Zt,y={start:kt()+w,b:d};d||(y.group=U,U.r+=1),a||r?r=y:(H&&(g(),c=Je(e,o,d,p,w,v,H)),d&&S(0,1),a=_(y,p),J(()=>Ae(e,d,"start")),It(O=>{if(r&&O>r.start&&(a=_(r,p),r=null,Ae(e,a.b,"start"),H&&(g(),c=Je(e,o,a.b,a.duration,0,v,s.css))),a){if(O>=a.end)S(o=a.b,1-o),Ae(e,a.b,"end"),r||(a.b?g():--a.group.r||X(a.group.c)),a=null;else if(O>=a.start){const P=O-a.start;o=a.a+a.d*v(P/a.duration),S(o,1-o)}}return!!(a||r)}))}return{run(d){Ke(s)?jt().then(()=>{s=s(i),b(d)}):b(d)},end(){g(),a=r=null}}}function Ie(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function Ce(e){e&&e.c()}function pe(e,t,n,l){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,n),l||J(()=>{const o=e.$$.on_mount.map(ft).filter(Ke);e.$$.on_destroy?e.$$.on_destroy.push(...o):X(o),e.$$.on_mount=[]}),s.forEach(J)}function ge(e,t){const n=e.$$;n.fragment!==null&&(At(n.after_update),X(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Wt(e,t){e.$$.dirty[0]===-1&&(se.push(e),Rt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function be(e,t,n,l,i,s,o,a=[-1]){const r=he;me(e);const c=e.$$={fragment:null,ctx:[],props:s,update:K,not_equal:i,bound:Qe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:Qe(),dirty:a,skip_bound:!1,root:t.target||r.$$.root};o&&o(c.root);let g=!1;if(c.ctx=n?n(e,t.props||{},(_,b,...d)=>{const w=d.length?d[0]:b;return c.ctx&&i(c.ctx[_],c.ctx[_]=w)&&(!c.skip_bound&&c.bound[_]&&c.bound[_](w),g&&Wt(e,_)),b}):[],c.update(),g=!0,X(c.before_update),c.fragment=l?l(c.ctx):!1,t.target){if(t.hydrate){const _=Ht(t.target);c.fragment&&c.fragment.l(_),_.forEach(C)}else c.fragment&&c.fragment.c();t.intro&&Q(e.$$.fragment),pe(e,t.target,t.anchor,t.customElement),vt()}me(r)}class we{$destroy(){ge(this,1),this.$destroy=K}$on(t,n){if(!Ke(n))return K;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(t){this.$$set&&!yt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function $e(e,{delay:t=0,duration:n=400,easing:l=ct}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:l,css:s=>`opacity: ${s*i}`}}const Bt="https://MTRData.kennymhhui.repl.co/lr?stnId={stn}",Yt="https://rt.data.gov.hk/v1/transport/mtr/lrt/getSchedule?station_id={stn}";class qt{constructor(t,n,l,i,s,o,a){Y(this,"route_no");Y(this,"train_length");Y(this,"dest_zh");Y(this,"dest_en");Y(this,"time_num");Y(this,"time_text");Y(this,"eta_date");this.route_no=t,this.train_length=n,this.dest_zh=l,this.dest_en=i,this.time_text=o,this.time_num=s,this.eta_date=a}}class f{constructor(t,n,l){Y(this,"name");Y(this,"initials");Y(this,"platforms");this.name=n,this.initials=t,this.platforms=l}}function Ut(e,t=!1){return(t?Yt:Bt).replace("{stn}",e)}const oe=new Map([["1",new f("1","屯門碼頭|Tuen Mun Ferry Pier",[2,3,4,5,7])],["10",new f("10","美樂|Melody Garden",[1,2])],["15",new f("15","蝴蝶|Butterfly",[1,2])],["20",new f("20","輕鐵車廠|Light Rail Depot",[1,2])],["30",new f("30","龍門|Lung Mun",[1,2])],["40",new f("40","青山村|Tsing Shan Tsuen",[1,2])],["50",new f("50","青雲|Tsing Wun",[1,2])],["60",new f("60","建安|Kin On",[1,2])],["70",new f("70","河田|Ho Tin",[1,2])],["75",new f("75","蔡意橋|Choy Yee Bridge",[1,2])],["80",new f("80","澤豐|Affluence",[1,2])],["90",new f("90","屯門醫院|Tuen Mun Hospital",[1,2])],["100",new f("100","兆康|Siu Hong",[1,2,5,6])],["110",new f("110","麒麟|Kei Lun",[1,2])],["120",new f("120","青松|Ching Chung",[1,2])],["130",new f("130","建生|Kin Sang",[1,2])],["140",new f("140","田景|Tin King",[1,2,3])],["150",new f("150","良景|Leung King",[1,2])],["160",new f("160","新圍|San Wai",[1,2])],["170",new f("170","石排|Shek Pai",[1,2])],["180",new f("180","山景 (北)|Shan King (North)",[1])],["190",new f("190","山景 (南)|Shan King (South)",[1])],["200",new f("200","鳴琴|Ming Kum",[1,2])],["212",new f("212","大興 (北)|Tai Hing (North)",[1,2])],["220",new f("220","大興 (南)|Tai Hing (South)",[1,2])],["230",new f("230","銀圍|Ngan Wai",[1,2])],["240",new f("240","兆禧|Siu Hei",[1,2])],["250",new f("250","屯門泳池|Tuen Mun Swimming Pool",[1,2])],["260",new f("260","豐景園|Goodview Garden",[1,2])],["265",new f("265","兆麟|Siu Lun",[1,2])],["270",new f("270","安定|On Ting",[1,2])],["275",new f("275","友愛|Yau Oi",[1])],["280",new f("280","市中心|Town Centre",[4])],["295",new f("295","屯門|Tuen Mun",[1,2])],["300",new f("300","杯渡|Pui To",[1,2])],["310",new f("310","何福堂|Hoh Fuk Tong",[1,2])],["320",new f("320","新墟|San Hui",[1,2])],["330",new f("330","景峰|Prime View",[1,2])],["340",new f("340","鳳地|Fung Tei",[1,2])],["350",new f("350","藍地|Lam Tei",[1,2])],["360",new f("360","泥圍|Nai Wai",[1,2])],["370",new f("370","鍾屋村|Chung Uk Tsuen",[1,2])],["380",new f("380","洪水橋|Hung Shui Kiu",[1,2])],["390",new f("390","塘坊村|Tong Fong Tsuen",[1,2])],["400",new f("400","屏山|Ping Shan",[1,2])],["425",new f("425","坑尾村|Hang Mei Tsuen",[1,2])],["430",new f("430","天水圍|Tin Shui Wai",[1,2,3])],["435",new f("435","天慈|Tin Tsz",[1,2])],["445",new f("445","天耀|Tin Yiu",[1,2])],["448",new f("448","樂湖|Locwood",[1,2])],["450",new f("450","天湖|Tin Wu",[1,2])],["455",new f("455","銀座|Ginza",[1,2])],["460",new f("460","天瑞|Tin Shui",[1,2])],["468",new f("468","頌富|Chung Fu",[1,2])],["480",new f("480","天富|Tin Fu",[1,2])],["490",new f("490","翠湖|Chestwood",[1,2])],["500",new f("500","天榮|Tin Wing",[6,7])],["510",new f("510","天悅|Tin Yuet",[1,2])],["520",new f("520","天秀|Tin Sau",[1,2])],["530",new f("530","濕地公園|Wetland Park",[1,2])],["540",new f("540","天恒|Tin Heng",[1,2])],["550",new f("550","天逸|Tin Yat",[1,2,4,5])],["560",new f("560","水邊圍|Shui Pin Wai",[1,2])],["570",new f("570","豐年路|Fung Nin Road",[1,2])],["580",new f("580","康樂路|Hong Lok Road",[1,2])],["590",new f("590","大棠路|Tai Tong Road",[1,2])],["600",new f("600","元朗|Yuen Long",[2,3,4,5])],["920",new f("920","三聖|Sam Shing",[1,3])]]);function Gt(e){let t,n,l,i,s,o,a,r,c,g,_,b,d=(e[3]||"站名")+"",w,p,v,S,H=(e[4]||"Station Name")+"",y,O,P,E,I,D,M,G;return{c(){t=m("div"),n=m("table"),l=m("tr"),i=m("td"),s=m("span"),o=L(e[0]),a=T(),r=m("div"),r.innerHTML="月台<br/>Platform",c=T(),g=m("td"),_=m("button"),b=m("span"),w=L(d),p=m("br"),v=T(),S=m("span"),y=L(H),O=T(),P=m("td"),E=L(e[1]),I=L(":"),D=L(e[2]),h(s,"class","platcircle svelte-1opbei8"),h(r,"class","plattext svelte-1opbei8"),h(i,"class","platformCell svelte-1opbei8"),h(b,"class","sizeZH svelte-1opbei8"),h(S,"class","en"),h(_,"class","non-styled-btn svelte-1opbei8"),h(g,"class","stnName svelte-1opbei8"),h(g,"title","Show Config Menu"),h(P,"class","clock svelte-1opbei8"),h(n,"id","titlebarTB"),h(n,"class","svelte-1opbei8"),h(t,"id","titlebar"),h(t,"class","svelte-1opbei8")},m(R,Z){N(R,t,Z),u(t,n),u(n,l),u(l,i),u(i,s),u(s,o),u(i,a),u(i,r),u(l,c),u(l,g),u(g,_),u(_,b),u(b,w),u(_,p),u(_,v),u(_,S),u(S,y),u(l,O),u(l,P),u(P,E),u(P,I),u(P,D),M||(G=[V(_,"click",e[5]),V(_,"keypress",e[5])],M=!0)},p(R,[Z]){Z&1&&F(o,R[0]),Z&8&&d!==(d=(R[3]||"站名")+"")&&F(w,d),Z&16&&H!==(H=(R[4]||"Station Name")+"")&&F(y,H),Z&2&&F(E,R[1]),Z&4&&F(D,R[2])},i:K,o:K,d(R){R&&C(t),M=!1,X(G)}}}function Vt(e,t,n){let{stnId:l}=t,{platform:i}=t;const s=Dt();let o=new Date,a,r,c,g;function _(){s("showConfig")}function b(){n(8,o=new Date)}return We(()=>{const d=setInterval(b,2e3);return b(),()=>clearInterval(d)}),e.$$set=d=>{"stnId"in d&&n(6,l=d.stnId),"platform"in d&&n(0,i=d.platform)},e.$$.update=()=>{var d,w;e.$$.dirty&256&&n(1,a=o.getHours().toString().padStart(2,"0")),e.$$.dirty&256&&n(2,r=o.getMinutes().toString().padStart(2,"0")),e.$$.dirty&64&&n(3,c=((d=oe.get(l))==null?void 0:d.name.split("|")[0])||""),e.$$.dirty&64&&n(4,g=((w=oe.get(l))==null?void 0:w.name.split("|")[1])||"")},[i,a,r,c,g,_,l,b,o]}class Qt extends we{constructor(t){super(),be(this,t,Vt,Gt,ve,{stnId:6,platform:0,updateDate:7})}get updateDate(){return this.$$.ctx[7]}}function xe(e,t,n){const l=e.slice();return l[5]=t[n],l[7]=n,l}function et(e,t,n){const l=e.slice();return l[5]=t[n],l[7]=n,l}function Jt(e){let t;return{c(){t=m("div"),t.innerHTML=`<div class="sizeDouble svelte-pxmlct"> </div> 
            <div class="svelte-pxmlct"></div> 
            <div class="svelte-pxmlct"></div> 
            <div class="svelte-pxmlct"></div> 
          `,h(t,"class","arrRow svelte-pxmlct")},m(n,l){N(n,t,l)},p:K,d(n){n&&C(t)}}}function Xt(e){let t,n,l=e[1][e[7]].route_no+"",i,s,o,a,r=e[1][e[7]].dest_zh+"",c,g,_=e[1][e[7]].dest_en+"",b,d,w,p,v,S,H={length:e[1][e[7]].train_length},y=[];for(let I=0;I<H.length;I+=1)y[I]=tt(et(e,H,I));function O(I,D){return I[0]=="relative"?xt:$t}let P=O(e),E=P(e);return{c(){t=m("div"),n=m("div"),i=L(l),s=T(),o=m("div"),a=m("span"),c=L(r),g=m("br"),b=L(_),d=T(),w=m("div");for(let I=0;I<y.length;I+=1)y[I].c();p=T(),v=m("div"),E.c(),S=T(),h(n,"class","sizeDouble svelte-pxmlct"),h(a,"class","sizeZH svelte-pxmlct"),h(o,"class","svelte-pxmlct"),h(w,"class","cars svelte-pxmlct"),h(v,"class","svelte-pxmlct"),h(t,"class","row arrRow svelte-pxmlct")},m(I,D){N(I,t,D),u(t,n),u(n,i),u(t,s),u(t,o),u(o,a),u(a,c),u(o,g),u(o,b),u(t,d),u(t,w);for(let M=0;M<y.length;M+=1)y[M]&&y[M].m(w,null);u(t,p),u(t,v),E.m(v,null),u(t,S)},p(I,D){if(D&2&&l!==(l=I[1][I[7]].route_no+"")&&F(i,l),D&2&&r!==(r=I[1][I[7]].dest_zh+"")&&F(c,r),D&2&&_!==(_=I[1][I[7]].dest_en+"")&&F(b,_),D&2){H={length:I[1][I[7]].train_length};let M;for(M=0;M<H.length;M+=1){const G=et(I,H,M);y[M]?y[M].p(G,D):(y[M]=tt(G),y[M].c(),y[M].m(w,null))}for(;M<y.length;M+=1)y[M].d(1);y.length=H.length}P===(P=O(I))&&E?E.p(I,D):(E.d(1),E=P(I),E&&(E.c(),E.m(v,null)))},d(I){I&&C(t),ze(y,I),E.d()}}}function tt(e){let t,n;return{c(){t=m("img"),h(t,"class","car svelte-pxmlct"),St(t.src,n="img/lrv.png")||h(t,"src",n),h(t,"alt","LRV Car "+e[7])},m(l,i){N(l,t,i)},p:K,d(l){l&&C(t)}}}function $t(e){let t,n=String(e[1][e[7]].eta_date.getHours()).padStart(2,"0")+"",l,i,s=String(e[1][e[7]].eta_date.getMinutes()).padStart(2,"0")+"",o;return{c(){t=m("span"),l=L(n),i=L(":"),o=L(s),h(t,"class","sizeDouble multiLine svelte-pxmlct")},m(a,r){N(a,t,r),u(t,l),u(t,i),u(t,o)},p(a,r){r&2&&n!==(n=String(a[1][a[7]].eta_date.getHours()).padStart(2,"0")+"")&&F(l,n),r&2&&s!==(s=String(a[1][a[7]].eta_date.getMinutes()).padStart(2,"0")+"")&&F(o,s)},d(a){a&&C(t)}}}function xt(e){let t,n=e[1][e[7]].time_num+"",l,i,s,o=e[1][e[7]].time_text.split("|")[0]+"",a,r,c=e[1][e[7]].time_text.split("|")[1]+"",g;return{c(){t=m("span"),l=L(n),i=T(),s=m("div"),a=L(o),r=m("br"),g=L(c),h(t,"class","sizeDouble multiLine svelte-pxmlct"),h(s,"class","eta")},m(_,b){N(_,t,b),u(t,l),N(_,i,b),N(_,s,b),u(s,a),u(s,r),u(s,g)},p(_,b){b&2&&n!==(n=_[1][_[7]].time_num+"")&&F(l,n),b&2&&o!==(o=_[1][_[7]].time_text.split("|")[0]+"")&&F(a,o),b&2&&c!==(c=_[1][_[7]].time_text.split("|")[1]+"")&&F(g,c)},d(_){_&&C(t),_&&C(i),_&&C(s)}}}function nt(e){let t;function n(s,o){return s[7]<s[1].length?Xt:Jt}let l=n(e),i=l(e);return{c(){i.c(),t=zt()},m(s,o){i.m(s,o),N(s,t,o)},p(s,o){l===(l=n(s))&&i?i.p(s,o):(i.d(1),i=l(s),i&&(i.c(),i.m(t.parentNode,t)))},d(s){i.d(s),s&&C(t)}}}function en(e){let t,n,l,i={length:lt},s=[];for(let o=0;o<i.length;o+=1)s[o]=nt(xe(e,i,o));return{c(){t=m("main"),n=m("div"),n.innerHTML=`<div class="svelte-pxmlct"><span class="sizeZH svelte-pxmlct">路線</span><br/>Route</div> 
        <div class="svelte-pxmlct"><span class="sizeZH svelte-pxmlct">目的地</span><br/>Destination</div> 
        <div class="svelte-pxmlct"></div> 
        <div class="svelte-pxmlct"><span class="sizeZH svelte-pxmlct">下班車</span><br/>Next Train</div>`,l=T();for(let o=0;o<s.length;o+=1)s[o].c();h(n,"class","row header svelte-pxmlct"),h(t,"class","svelte-pxmlct")},m(o,a){N(o,t,a),u(t,n),u(t,l);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(t,null)},p(o,[a]){if(a&3){i={length:lt};let r;for(r=0;r<i.length;r+=1){const c=xe(o,i,r);s[r]?s[r].p(c,a):(s[r]=nt(c),s[r].c(),s[r].m(t,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}},i:K,o:K,d(o){o&&C(t),ze(s,o)}}}const lt=10;function tn(e,t,n){let{stnId:l}=t,{targetPlatform:i}=t,{timeMode:s}=t,o=[];async function a(r,c,g=!1){if(r==null||c==null)return;let _;try{_=await fetch(Ut(r,g))}catch{if(!g)return console.warn("Cannot fetch data from proxy server, falling back to MTR"),a(r,c,!0)}let b=await _.json();if(b.status!=1)return;let d=[];for(let w of b.platform_list)if(w.platform_id===c)for(let p of w.route_list){if(p.stop===1)continue;let v,S;p.time_en.includes("min")?(v="分鐘|min",S=p.time_en.split(" min")[0]):p.time_en==="-"?(v=" | ",S="-"):(S="",v=`${p.time_ch}|${p.time_en}`);let H=(parseInt(S)||0)*1e3*60,y=new Date(new Date().getTime()+H),O=new qt(p.route_no,p.train_length,p.dest_ch,p.dest_en,S,v,y);d.push(O)}n(1,o=d)}return We(async()=>{const r=setInterval(async()=>await a(l,i),1e4);return()=>clearInterval(r)}),e.$$set=r=>{"stnId"in r&&n(2,l=r.stnId),"targetPlatform"in r&&n(3,i=r.targetPlatform),"timeMode"in r&&n(0,s=r.timeMode)},e.$$.update=()=>{e.$$.dirty&12&&a(l,i)},[s,o,l,i]}class nn extends we{constructor(t){super(),be(this,t,tn,en,ve,{stnId:2,targetPlatform:3,timeMode:0})}}function ln(e){let t,n,l,i;return t=new Qt({props:{stnId:e[0],platform:e[1]}}),t.$on("showConfig",e[3]),l=new nn({props:{stnId:e[0],targetPlatform:e[1],timeMode:e[2]}}),{c(){Ce(t.$$.fragment),n=T(),Ce(l.$$.fragment)},m(s,o){pe(t,s,o),N(s,n,o),pe(l,s,o),i=!0},p(s,[o]){const a={};o&1&&(a.stnId=s[0]),o&2&&(a.platform=s[1]),t.$set(a);const r={};o&1&&(r.stnId=s[0]),o&2&&(r.targetPlatform=s[1]),o&4&&(r.timeMode=s[2]),l.$set(r)},i(s){i||(Q(t.$$.fragment,s),Q(l.$$.fragment,s),i=!0)},o(s){ue(t.$$.fragment,s),ue(l.$$.fragment,s),i=!1},d(s){ge(t,s),s&&C(n),ge(l,s)}}}function sn(e,t,n){let{stnId:l}=t,{platform:i}=t,{timeMode:s}=t;function o(a){gt.call(this,e,a)}return e.$$set=a=>{"stnId"in a&&n(0,l=a.stnId),"platform"in a&&n(1,i=a.platform),"timeMode"in a&&n(2,s=a.timeMode)},[l,i,s,o]}class on extends we{constructor(t){super(),be(this,t,sn,ln,ve,{stnId:0,platform:1,timeMode:2})}}function st(e,t,n){const l=e.slice();return l[10]=t[n],l}function it(e,t,n){const l=e.slice();return l[13]=t[n][0],l[14]=t[n][1],l}function ot(e){let t,n=e[14].name.replace("|"," ")+"",l;return{c(){t=m("option"),l=L(n),t.__value=e[13],t.value=t.__value},m(i,s){N(i,t,s),u(t,l)},p:K,d(i){i&&C(t)}}}function rt(e){let t,n=e[10]+"",l,i;return{c(){t=m("option"),l=L(n),t.__value=i=e[10],t.value=t.__value},m(s,o){N(s,t,o),u(t,l)},p(s,o){o&1&&n!==(n=s[10]+"")&&F(l,n),o&1&&i!==(i=s[10])&&(t.__value=i,t.value=t.__value)},d(s){s&&C(t)}}}function rn(e){var Ve;let t,n,l,i,s,o,a,r,c,g,_,b,d,w,p,v,S,H,y,O,P,E,I,D,M,G,R,Z,Be,Se,q,$,x,Ye,ce,qe,Ee,Ue,Le,De,fe,Ne,Ge,ee=[...oe],A=[];for(let k=0;k<ee.length;k+=1)A[k]=ot(it(e,ee,k));let te=((Ve=oe.get(e[0]))==null?void 0:Ve.platforms)??[],j=[];for(let k=0;k<te.length;k+=1)j[k]=rt(st(e,te,k));return{c(){t=m("main"),n=m("h1"),n.textContent="輕鐵資訊顯示屏模擬器",l=T(),i=m("h3"),i.textContent="Light Rail PIDS Simulator",s=T(),o=m("hr"),a=T(),r=m("table"),c=m("tr"),g=m("td"),g.innerHTML='<span class="sizeZH svelte-3fs0rb">車站</span><br/><span class="sizeEN svelte-3fs0rb">Station</span>',_=T(),b=m("td"),d=m("select");for(let k=0;k<A.length;k+=1)A[k].c();w=T(),p=m("tr"),v=m("td"),v.innerHTML='<span class="sizeZH svelte-3fs0rb">月台</span><br/><span class="sizeEN svelte-3fs0rb">Platform</span>',S=T(),H=m("td"),y=m("select");for(let k=0;k<j.length;k+=1)j[k].c();O=T(),P=m("tr"),E=m("td"),E.innerHTML='<span class="sizeZH svelte-3fs0rb">全螢幕</span><br/><span class="sizeEN svelte-3fs0rb">Full Screen</span>',I=T(),D=m("td"),M=m("input"),G=T(),R=m("tr"),Z=m("td"),Z.innerHTML='<span class="sizeZH svelte-3fs0rb">時間顯示</span><br/><span class="sizeEN svelte-3fs0rb">Time Display</span>',Be=T(),Se=m("td"),q=m("select"),$=m("option"),$.textContent="預計到達時間 ETA",x=m("option"),x.textContent="時間 Time",Ye=T(),ce=m("button"),ce.textContent="開始 Start",qe=T(),Ee=m("p"),Ee.textContent="如需要再顯示此菜單，請按頂部的車站名",Ue=T(),Le=m("p"),Le.textContent="Click the station name at the top to return to this menu.",De=T(),fe=m("footer"),fe.innerHTML=`<p class="svelte-3fs0rb"><a href="https://hktss.github.io/mtr-pids/" target="_blank" rel="noopener noreferrer">願景資訊顯示屏模擬器<br/>Railway Vision PIDS Simulator</a></p> 
    <a href="https://hktss.github.io/" target="_blank" rel="noopener noreferrer" class="svelte-3fs0rb"><img class="logo" src="img/tss_logo.png" alt="HKTSS Logo" height="40"/></a>`,h(n,"class","sizeZH svelte-3fs0rb"),h(i,"class","sizeEN svelte-3fs0rb"),h(g,"class","svelte-3fs0rb"),h(d,"id","stnOpt"),h(d,"class","svelte-3fs0rb"),e[0]===void 0&&J(()=>e[5].call(d)),h(b,"class","svelte-3fs0rb"),h(c,"class","svelte-3fs0rb"),h(v,"class","svelte-3fs0rb"),h(y,"id","platOpt"),h(y,"class","svelte-3fs0rb"),e[1]===void 0&&J(()=>e[6].call(y)),h(H,"class","svelte-3fs0rb"),h(p,"class","svelte-3fs0rb"),h(E,"class","svelte-3fs0rb"),h(M,"type","checkbox"),h(D,"class","svelte-3fs0rb"),h(P,"class","svelte-3fs0rb"),h(Z,"class","svelte-3fs0rb"),$.__value="relative",$.value=$.__value,x.__value="absolute",x.value=x.__value,h(q,"class","svelte-3fs0rb"),e[3]===void 0&&J(()=>e[9].call(q)),h(Se,"class","svelte-3fs0rb"),h(R,"class","svelte-3fs0rb"),h(r,"id","cfgTable"),h(r,"class","svelte-3fs0rb"),h(ce,"class","closeBtn svelte-3fs0rb"),h(t,"class","svelte-3fs0rb"),h(fe,"class","svelte-3fs0rb")},m(k,W){N(k,t,W),u(t,n),u(t,l),u(t,i),u(t,s),u(t,o),u(t,a),u(t,r),u(r,c),u(c,g),u(c,_),u(c,b),u(b,d);for(let B=0;B<A.length;B+=1)A[B]&&A[B].m(d,null);ne(d,e[0],!0),u(r,w),u(r,p),u(p,v),u(p,S),u(p,H),u(H,y);for(let B=0;B<j.length;B+=1)j[B]&&j[B].m(y,null);ne(y,e[1],!0),u(r,O),u(r,P),u(P,E),u(P,I),u(P,D),u(D,M),M.checked=e[2],u(r,G),u(r,R),u(R,Z),u(R,Be),u(R,Se),u(Se,q),u(q,$),u(q,x),ne(q,e[3],!0),u(t,Ye),u(t,ce),u(t,qe),u(t,Ee),u(t,Ue),u(t,Le),N(k,De,W),N(k,fe,W),Ne||(Ge=[V(d,"change",e[5]),V(y,"change",e[6]),V(M,"change",e[7]),V(M,"click",e[8]),V(q,"change",e[9]),V(ce,"click",e[4])],Ne=!0)},p(k,[W]){var B;if(W&0){ee=[...oe];let z;for(z=0;z<ee.length;z+=1){const de=it(k,ee,z);A[z]?A[z].p(de,W):(A[z]=ot(de),A[z].c(),A[z].m(d,null))}for(;z<A.length;z+=1)A[z].d(1);A.length=ee.length}if(W&1&&ne(d,k[0]),W&1){te=((B=oe.get(k[0]))==null?void 0:B.platforms)??[];let z;for(z=0;z<te.length;z+=1){const de=st(k,te,z);j[z]?j[z].p(de,W):(j[z]=rt(de),j[z].c(),j[z].m(y,null))}for(;z<j.length;z+=1)j[z].d(1);j.length=te.length}W&3&&ne(y,k[1]),W&4&&(M.checked=k[2]),W&8&&ne(q,k[3])},i:K,o:K,d(k){k&&C(t),ze(A,k),ze(j,k),k&&C(De),k&&C(fe),Ne=!1,X(Ge)}}}function an(e,t,n){let{stationId:l}=t,{selectedPlatform:i}=t,{useHorizontal:s}=t,{timeMode:o}=t;function a(d){gt.call(this,e,d)}function r(){l=Re(this),n(0,l)}function c(){i=Re(this),n(1,i),n(0,l)}function g(){s=this.checked,n(2,s)}const _=()=>n(2,s=!s);function b(){o=Re(this),n(3,o)}return e.$$set=d=>{"stationId"in d&&n(0,l=d.stationId),"selectedPlatform"in d&&n(1,i=d.selectedPlatform),"useHorizontal"in d&&n(2,s=d.useHorizontal),"timeMode"in d&&n(3,o=d.timeMode)},[l,i,s,o,a,r,c,g,_,b]}class un extends we{constructor(t){super(),be(this,t,an,rn,ve,{stationId:0,selectedPlatform:1,useHorizontal:2,timeMode:3})}}function at(e){let t,n,l,i,s,o,a,r,c;function g(p){e[6](p)}function _(p){e[7](p)}function b(p){e[8](p)}function d(p){e[9](p)}let w={};return e[0]!==void 0&&(w.stationId=e[0]),e[1]!==void 0&&(w.selectedPlatform=e[1]),e[2]!==void 0&&(w.useHorizontal=e[2]),e[4]!==void 0&&(w.timeMode=e[4]),n=new un({props:w}),ie.push(()=>Ie(n,"stationId",g)),ie.push(()=>Ie(n,"selectedPlatform",_)),ie.push(()=>Ie(n,"useHorizontal",b)),ie.push(()=>Ie(n,"timeMode",d)),n.$on("click",e[10]),{c(){t=m("div"),Ce(n.$$.fragment),h(t,"class",a=Te(e[2]?"horizontal":"portrait")+" svelte-1pj8315")},m(p,v){N(p,t,v),pe(n,t,null),c=!0},p(p,v){const S={};!l&&v&1&&(l=!0,S.stationId=p[0],ke(()=>l=!1)),!i&&v&2&&(i=!0,S.selectedPlatform=p[1],ke(()=>i=!1)),!s&&v&4&&(s=!0,S.useHorizontal=p[2],ke(()=>s=!1)),!o&&v&16&&(o=!0,S.timeMode=p[4],ke(()=>o=!1)),n.$set(S),(!c||v&4&&a!==(a=Te(p[2]?"horizontal":"portrait")+" svelte-1pj8315"))&&h(t,"class",a)},i(p){c||(Q(n.$$.fragment,p),J(()=>{c&&(r||(r=Xe(t,$e,{duration:100},!0)),r.run(1))}),c=!0)},o(p){ue(n.$$.fragment,p),r||(r=Xe(t,$e,{duration:100},!1)),r.run(0),c=!1},d(p){p&&C(t),ge(n),p&&r&&r.end()}}}function cn(e){let t,n,l,i,s,o;l=new on({props:{stnId:e[0],platform:e[1],timeMode:e[4]}}),l.$on("showConfig",e[5]);let a=e[3]&&at(e);return{c(){t=m("main"),n=m("div"),Ce(l.$$.fragment),s=T(),a&&a.c(),h(n,"class",i=Te(e[2]?"horizontal":"portrait")+" svelte-1pj8315"),h(t,"class","svelte-1pj8315")},m(r,c){N(r,t,c),u(t,n),pe(l,n,null),u(t,s),a&&a.m(t,null),o=!0},p(r,[c]){const g={};c&1&&(g.stnId=r[0]),c&2&&(g.platform=r[1]),c&16&&(g.timeMode=r[4]),l.$set(g),(!o||c&4&&i!==(i=Te(r[2]?"horizontal":"portrait")+" svelte-1pj8315"))&&h(n,"class",i),r[3]?a?(a.p(r,c),c&8&&Q(a,1)):(a=at(r),a.c(),Q(a,1),a.m(t,null)):a&&(Ft(),ue(a,1,1,()=>{a=null}),Kt())},i(r){o||(Q(l.$$.fragment,r),Q(a),o=!0)},o(r){ue(l.$$.fragment,r),ue(a),o=!1},d(r){r&&C(t),ge(l),a&&a.d()}}}function ut(e,t,n,l){localStorage.setItem("visited",String(!0)),localStorage.setItem("stnId",e),localStorage.setItem("platform",t.toString()),localStorage.setItem("horizontal",String(n)),localStorage.setItem("timeMode",l)}function fn(e,t,n){let l,i,s=!1,o=!1,a="relative";function r(){n(3,o=localStorage.getItem("visited")==null),n(1,i=parseInt(localStorage.getItem("platform"))||2),n(0,l=localStorage.getItem("stnId")??"1"),n(2,s=localStorage.getItem("horizontal")==="true"),n(4,a=localStorage.getItem("timeMode")??"relative")}function c(){const v=new URLSearchParams(window.location.search),S=Object.fromEntries(v.entries());S.stnId!=null&&S.plat!=null&&(n(3,o=!1),n(0,l=S.stnId),n(1,i=parseInt(S.plat))),S.horz!=null&&n(2,s=S.horz==="true")}We(()=>{r(),c(),ut(l,i,s,a)});const g=()=>n(3,o=!0);function _(v){l=v,n(0,l)}function b(v){i=v,n(1,i)}function d(v){s=v,n(2,s)}function w(v){a=v,n(4,a)}return[l,i,s,o,a,g,_,b,d,w,()=>{n(3,o=!1),ut(l,i,s,a)}]}class dn extends we{constructor(t){super(),be(this,t,fn,cn,ve,{})}}new dn({target:document.getElementById("app")});
